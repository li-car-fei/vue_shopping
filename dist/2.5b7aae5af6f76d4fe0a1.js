(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{13:function(t,s,i){},18:function(t,s,i){"use strict";var a=i(13);i.n(a).a},22:function(t,s,i){"use strict";i.r(s);var a=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"cart"},[t._m(0),t._v(" "),i("div",{staticClass:"cart-content"},[t._l(t.cartList,function(s,a){return i("div",{staticClass:"cart-content-main"},[i("div",{staticClass:"cart-info"},[i("router-link",{attrs:{to:"/product/"+s.id}},[i("img",{attrs:{src:t.productDictList[s.id].image}})]),t._v(" "),i("span",[t._v(t._s(t.productDictList[s.id].name))])],1),t._v(" "),i("div",{staticClass:"cart-price"},[t._v("\n                ￥ "+t._s(t.productDictList[s.id].cost)+"\n            ")]),t._v(" "),i("div",{staticClass:"cart-count"},[i("span",{staticClass:"cart-control-minus",on:{click:function(s){return t.handleCount(a,-1)}}},[t._v("-")]),t._v("\n                "+t._s(s.count)+"\n                "),i("span",{staticClass:"cart-control-add",on:{click:function(s){return t.handleCount(a,1)}}},[t._v("+")])]),t._v(" "),i("div",{staticClass:"cart-cost"},[t._v("\n                ￥ "+t._s(t.productDictList[s.id].cost*s.count)+"\n            ")]),t._v(" "),i("div",{staticClass:"cart-delete"},[i("span",{staticClass:"cart-control-delete",on:{click:function(s){return t.handleDelete(a)}}},[t._v("删除")])])])}),t._v(" "),t.cartList.length?t._e():i("div",{staticClass:"cart-empty"},[t._v("购物车为空")])],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.cartList.length,expression:"cartList.length"}],staticClass:"cart-promotion"},[i("span",[t._v("使用优惠券")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.promotionCode,expression:"promotionCode"}],attrs:{type:"text"},domProps:{value:t.promotionCode},on:{input:function(s){s.target.composing||(t.promotionCode=s.target.value)}}}),t._v(" "),i("span",{staticClass:"cart-control-promotion",on:{click:t.handleCheckCode}},[t._v("验证")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.cartList.length,expression:"cartList.length"}],staticClass:"cart-footer"},[i("div",{staticClass:"cart-footer-desc"},[t._v("\n            共计 "),i("span",[t._v(t._s(t.countAll))])]),t._v(" "),i("div",{staticClass:"cart-footer-desc"},[t._v("\n            应付总额 "),i("span",[t._v(t._s(t.costAll-t.promotion))]),t._v(" "),i("br"),t._v(" "),t.promotion?[t._v("\n                (优惠"),i("span",[t._v("￥ "+t._s(t.promotion)+" ")]),t._v(")\n            ")]:t._e()],2),t._v(" "),i("div",{staticClass:"cart-footer-desc"},[i("div",{staticClass:"cart-control-order",on:{click:t.handleOrder}},[t._v("现在结算")])])])])};a._withStripped=!0;var c=i(4),o={name:"cart",data:()=>({promotion:0,promotionCode:"",productList:c.a}),computed:{cartList(){return this.$store.state.cartList},productDictList(){const t={};return this.productList.forEach(s=>{t[s.id]=s}),t},countAll(){let t=0;return this.cartList.forEach(s=>{t+=s.count}),t},costAll(){let t=0;return this.cartList.forEach(s=>{t+=this.productDictList[s.id].cost*s.count}),t}},methods:{handleOrder(){this.$store.dispatch("buy").then(t=>{window.alert(t)})},handleCheckCode(){""!==this.promotionCode?"ccylovehs"===this.promotionCode?this.promotion=500:window.alert("优惠码输入错误"):window.alert("请输入优惠码")},handleCount(t,s){s<0&&1===this.cartList[t].count||this.$store.dispatch("editCart",{id:this.cartList[t].id,count:s}).then(t=>{},t=>{window.alert(t)})},handleDelete(t){this.$store.commit("deleteCart",this.cartList[t].id)}}},r=(i(18),i(3)),e=Object(r.a)(o,a,[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"cart-header"},[i("div",{staticClass:"cart-header-title"},[t._v("购物清单")]),t._v(" "),i("div",{staticClass:"cart-header-main"},[i("div",{staticClass:"cart-info"},[t._v("商品信息")]),t._v(" "),i("div",{staticClass:"cart-price"},[t._v("单价")]),t._v(" "),i("div",{staticClass:"cart-count"},[t._v("数量")]),t._v(" "),i("div",{staticClass:"cart-cost"},[t._v("小计")]),t._v(" "),i("div",{staticClass:"cart-delete"},[t._v("删除")])])])}],!1,null,"c7dd8b8c",null);e.options.__file="src/views/cart.vue";s.default=e.exports}}]);